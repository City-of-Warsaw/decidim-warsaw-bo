<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Decidim::Projects::Admin::Permissions
  
    &mdash; Dokumentacja Decidim BO
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Decidim::Projects::Admin::Permissions";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Admin.html" title="Decidim::Projects::Admin (module)">Admin</a></span></span>
     &raquo; 
    <span class="title">Permissions</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Decidim::Projects::Admin::Permissions
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Admin::Permissions</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Admin::Permissions</li>
          
            <li class="next">Decidim::Projects::Admin::Permissions</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>decidim-projects/app/permissions/decidim/projects/admin/permissions.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Permissions class defines all the permissions in admin scope</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_accepting_actions%3F-instance_method" title="#allowed_project_accepting_actions? (instance method)">#<strong>allowed_project_accepting_actions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects accepting is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_creating_actions%3F-instance_method" title="#allowed_project_creating_actions? (instance method)">#<strong>allowed_project_creating_actions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects creating is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_deleting_actions%3F-instance_method" title="#allowed_project_deleting_actions? (instance method)">#<strong>allowed_project_deleting_actions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects deleting is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_passing_actions%3F-instance_method" title="#allowed_project_passing_actions? (instance method)">#<strong>allowed_project_passing_actions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects forwarding is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_publishing_action%3F-instance_method" title="#allowed_project_publishing_action? (instance method)">#<strong>allowed_project_publishing_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects publishing is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_reading_actions%3F-instance_method" title="#allowed_project_reading_actions? (instance method)">#<strong>allowed_project_reading_actions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if viewing project read actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_status_change%3F-instance_method" title="#allowed_project_status_change? (instance method)">#<strong>allowed_project_status_change?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects manual status change is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_project_updating_actions%3F-instance_method" title="#allowed_project_updating_actions? (instance method)">#<strong>allowed_project_updating_actions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects edition is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_projects_bulk_action%3F-instance_method" title="#allowed_projects_bulk_action? (instance method)">#<strong>allowed_projects_bulk_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if projects bulk actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_register_project_to_signum%3F-instance_method" title="#allowed_register_project_to_signum? (instance method)">#<strong>allowed_register_project_to_signum?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Tylko admin i koordynator moga rejestrowac dokumenty w signum.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_accept_coauthor%3F-instance_method" title="#allowed_to_accept_coauthor? (instance method)">#<strong>allowed_to_accept_coauthor?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_erase_user_data%3F-instance_method" title="#allowed_to_erase_user_data? (instance method)">#<strong>allowed_to_erase_user_data?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_export_voting_card%3F-instance_method" title="#allowed_to_export_voting_card? (instance method)">#<strong>allowed_to_export_voting_card?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: allow export voting list, action is for ad_admin only.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_generate_voting_numbers%3F-instance_method" title="#allowed_to_generate_voting_numbers? (instance method)">#<strong>allowed_to_generate_voting_numbers?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: allow generate voting_numbers fol voting list, action is fo ad_admin only, only before start voting process.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_mark_conflicts%3F-instance_method" title="#allowed_to_mark_conflicts? (instance method)">#<strong>allowed_to_mark_conflicts?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_notify_authors_about_all_evaluation_results%3F-instance_method" title="#allowed_to_notify_authors_about_all_evaluation_results? (instance method)">#<strong>allowed_to_notify_authors_about_all_evaluation_results?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Only admin can notify all authors only date.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_notify_authors_about_evaluation_result%3F-instance_method" title="#allowed_to_notify_authors_about_evaluation_result? (instance method)">#<strong>allowed_to_notify_authors_about_evaluation_result?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: allow notification about about_evaluation results (positive or negative) for specific project Only coordinators and admin can send notifications Action i possible only on evaluation_publish_date day, after specific hour Based on the outcome, method sets the permission_action as allowed or disallowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_notify_authors_about_evaluation_results%3F-instance_method" title="#allowed_to_notify_authors_about_evaluation_results? (instance method)">#<strong>allowed_to_notify_authors_about_evaluation_results?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: allow notification about about_evaluation results (positive or negative) Only coordinators and admin can send notifications Action i possible only on evaluation_publish_date day, after specific hour Based on the outcome, method sets the permission_action as allowed or disallowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_remind_about_drafts%3F-instance_method" title="#allowed_to_remind_about_drafts? (instance method)">#<strong>allowed_to_remind_about_drafts?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: allow remind users about drafts projects Based on the outcome, method sets the permission_action as allowed or disallowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_remind_about_missing_evaluations%3F-instance_method" title="#allowed_to_remind_about_missing_evaluations? (instance method)">#<strong>allowed_to_remind_about_missing_evaluations?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: allow remind coordinators about missing evaluations Based on the outcome, method sets the permission_action as allowed or disallowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_send_implementation_message%3F-instance_method" title="#allowed_to_send_implementation_message? (instance method)">#<strong>allowed_to_send_implementation_message?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if sending message to authors of given project about update in implementation is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_send_message%3F-instance_method" title="#allowed_to_send_message? (instance method)">#<strong>allowed_to_send_message?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if sending message to authors of given project is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#allowed_to_send_messages%3F-instance_method" title="#allowed_to_send_messages? (instance method)">#<strong>allowed_to_send_messages?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if sending bulk messages to projects authors is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#appeal-instance_method" title="#appeal (instance method)">#<strong>appeal</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for fetching appeal from the context.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#appeal_action%3F-instance_method" title="#appeal_action? (instance method)">#<strong>appeal_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if appeal managing actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#change_verificator_action%3F-instance_method" title="#change_verificator_action? (instance method)">#<strong>change_verificator_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if changing project&#39;s evaluator is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#component-instance_method" title="#component (instance method)">#<strong>component</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for fetching component from the context.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#edition-instance_method" title="#edition (instance method)">#<strong>edition</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for defining edition (participatory process) based on the component.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#evaluation_action%3F-instance_method" title="#evaluation_action? (instance method)">#<strong>evaluation_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if evaluation action that was called is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#evaluation_edition_action%3F-instance_method" title="#evaluation_edition_action? (instance method)">#<strong>evaluation_edition_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if evaluation of any kind (forma, meritorical or reevaluation) edit actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#forward_to_department_action%3F-instance_method" title="#forward_to_department_action? (instance method)">#<strong>forward_to_department_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if forwarding project to the department is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#forward_to_user_action%3F-instance_method" title="#forward_to_user_action? (instance method)">#<strong>forward_to_user_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if forwarding project to the user is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#implementation_action%3F-instance_method" title="#implementation_action? (instance method)">#<strong>implementation_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if implementation managing actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#implementation_index_action%3F-instance_method" title="#implementation_index_action? (instance method)">#<strong>implementation_index_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if viewing implementations index is allowed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#permissions-instance_method" title="#permissions (instance method)">#<strong>permissions</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: main method called to check permissions in the admin scope.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#process-instance_method" title="#process (instance method)">#<strong>process</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for participatory process scope based on the component.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#project-instance_method" title="#project (instance method)">#<strong>project</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for fetching project from the context.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#project_conflict_action%3F-instance_method" title="#project_conflict_action? (instance method)">#<strong>project_conflict_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if project conflict handling actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#projects_export_action%3F-instance_method" title="#projects_export_action? (instance method)">#<strong>projects_export_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if exporting projects to file is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#ranking_list_action%3F-instance_method" title="#ranking_list_action? (instance method)">#<strong>ranking_list_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if ranking lists actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#reevaluation_action%3F-instance_method" title="#reevaluation_action? (instance method)">#<strong>reevaluation_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if reevaluation action that was called is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#return_to_department_action%3F-instance_method" title="#return_to_department_action? (instance method)">#<strong>return_to_department_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if returning project to the department is allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#scope-instance_method" title="#scope (instance method)">#<strong>scope</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for defining scope based on the project.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#second_verification_action%3F-instance_method" title="#second_verification_action? (instance method)">#<strong>second_verification_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if reevaluation actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#verification_action%3F-instance_method" title="#verification_action? (instance method)">#<strong>verification_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if verification actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#vote-instance_method" title="#vote (instance method)">#<strong>vote</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for fetching vote from the context.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#votes_action%3F-instance_method" title="#votes_action? (instance method)">#<strong>votes_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if votes managing actions are allowed.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#voting_list_action%3F-instance_method" title="#voting_list_action? (instance method)">#<strong>voting_list_action?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Public: method for determining if voting lists actions are allowed.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="allowed_project_accepting_actions?-instance_method">
  
    #<strong>allowed_project_accepting_actions?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects accepting is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


642
643
644
645
646
647</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 642</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_accepting_actions?'>allowed_project_accepting_actions?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:accept</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_creating_actions?-instance_method">
  
    #<strong>allowed_project_creating_actions?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects creating is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


603
604
605
606
607
608
609</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 603</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_creating_actions?'>allowed_project_creating_actions?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_edition'>edition</span><span class='op'>&amp;.</span><span class='id identifier rubyid_paper_project_submit_end_date'>paper_project_submit_end_date</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:create</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_has_ad_role?'>has_ad_role?</span> <span class='op'>&amp;&amp;</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_edition'>edition</span><span class='period'>.</span><span class='id identifier rubyid_paper_project_submit_end_date'>paper_project_submit_end_date</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_deleting_actions?-instance_method">
  
    #<strong>allowed_project_deleting_actions?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects deleting is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


630
631
632
633
634
635
636</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 630</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_deleting_actions?'>allowed_project_deleting_actions?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:destroy</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>draft</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>admin_draft</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_passing_actions?-instance_method">
  
    #<strong>allowed_project_passing_actions?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects forwarding is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


674
675
676
677
678
679</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 674</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_passing_actions?'>allowed_project_passing_actions?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:pass</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_publishing_action?-instance_method">
  
    #<strong>allowed_project_publishing_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects publishing is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


685
686
687
688
689
690</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 685</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_publishing_action?'>allowed_project_publishing_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:publish</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_reading_actions?-instance_method">
  
    #<strong>allowed_project_reading_actions?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if viewing project read actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


588
589
590
591
592
593
594
595
596
597</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 588</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_reading_actions?'>allowed_project_reading_actions?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='symbol'>:show</span><span class='comma'>,</span> <span class='symbol'>:index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:show</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_has_ad_role?'>has_ad_role?</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_has_ad_role?'>has_ad_role?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_status_change?-instance_method">
  
    #<strong>allowed_project_status_change?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects manual status change is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


663
664
665
666
667
668</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 663</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_status_change?'>allowed_project_status_change?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:status_change</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_project_updating_actions?-instance_method">
  
    #<strong>allowed_project_updating_actions?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects edition is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


615
616
617
618
619
620
621
622
623
624</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 615</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_project_updating_actions?'>allowed_project_updating_actions?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit</span>

  <span class='comment'># for admins, coordinators, current sub_coordinators and current evaluators (editors and verificators)
</span>  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span>
                 <span class='lparen'>(</span><span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation_publish_date'>reevaluation_publish_date</span> <span class='op'>||</span>
                 <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_reevaluation_time?'>withing_verificators_reevaluation_time?</span> <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_projects_bulk_action?-instance_method">
  
    #<strong>allowed_projects_bulk_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if projects bulk actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


696
697
698
699
700
701
702
703
704
705</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 696</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_projects_bulk_action?'>allowed_projects_bulk_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='symbol'>:bulk_action</span><span class='comma'>,</span> <span class='symbol'>:bulk_subcoordinator_action</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:bulk_action</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:bulk_subcoordinator_action</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_sub_coordinator?'>ad_sub_coordinator?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_register_project_to_signum?-instance_method">
  
    #<strong>allowed_register_project_to_signum?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Tylko admin i koordynator moga rejestrowac dokumenty w signum</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


744
745
746
747
748
749</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 744</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_register_project_to_signum?'>allowed_register_project_to_signum?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:register_to_signum</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_signum_znak_sprawy'>signum_znak_sprawy</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_accept_coauthor?-instance_method">
  
    #<strong>allowed_to_accept_coauthor?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


751
752
753
754
755</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 751</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_accept_coauthor?'>allowed_to_accept_coauthor?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:coauthor_accept</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_erase_user_data?-instance_method">
  
    #<strong>allowed_to_erase_user_data?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


649
650
651
652
653
654
655
656
657
658</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 649</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_erase_user_data?'>allowed_to_erase_user_data?</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:erase_user_data</span>

  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_show_voting_results_button_at'>show_voting_results_button_at</span> <span class='op'>&lt;=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_export_voting_card?-instance_method">
  
    #<strong>allowed_to_export_voting_card?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: allow export voting list, action is for ad_admin only</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


845
846
847
848
849
850
851</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 845</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_export_voting_card?'>allowed_to_export_voting_card?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:export_voting_card</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_voting_step'>voting_step</span><span class='period'>.</span><span class='id identifier rubyid_end_date'>end_date</span> <span class='op'>&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_generate_voting_numbers?-instance_method">
  
    #<strong>allowed_to_generate_voting_numbers?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: allow generate voting_numbers fol voting list, action is fo ad_admin only, only before start voting process</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


831
832
833
834
835
836
837
838</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 831</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_generate_voting_numbers?'>allowed_to_generate_voting_numbers?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:generate_voting_numbers</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_ready_to_start_voting?'>ready_to_start_voting?</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_mark_conflicts?-instance_method">
  
    #<strong>allowed_to_mark_conflicts?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


939
940
941
942
943</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 939</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_mark_conflicts?'>allowed_to_mark_conflicts?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:mark_conflicts</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_notify_authors_about_all_evaluation_results?-instance_method">
  
    #<strong>allowed_to_notify_authors_about_all_evaluation_results?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Only admin can notify all authors only date</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


816
817
818
819
820
821
822
823
824
825</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 816</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_notify_authors_about_all_evaluation_results?'>allowed_to_notify_authors_about_all_evaluation_results?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:notify_authors_about_all_evaluation_results</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_publish_date'>evaluation_publish_date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>!=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_publish_date'>evaluation_publish_date</span> <span class='op'>&gt;=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_step'>evaluation_step</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active_step?'>active_step?</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_notify_authors_about_evaluation_result?-instance_method">
  
    #<strong>allowed_to_notify_authors_about_evaluation_result?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: allow notification about about_evaluation results (positive or negative) for specific project Only coordinators and admin can send notifications Action i possible only on evaluation_publish_date day, after specific hour Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


787
788
789
790
791
792
793
794
795</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 787</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_notify_authors_about_evaluation_result?'>allowed_to_notify_authors_about_evaluation_result?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:notify_authors_about_evaluation_result</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_publish_date'>evaluation_publish_date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>!=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_publish_date'>evaluation_publish_date</span> <span class='op'>&gt;=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_step'>evaluation_step</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active_step?'>active_step?</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_department_id'>current_department_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_department'>department</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_notify_authors_about_evaluation_results?-instance_method">
  
    #<strong>allowed_to_notify_authors_about_evaluation_results?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: allow notification about about_evaluation results (positive or negative) Only coordinators and admin can send notifications Action i possible only on evaluation_publish_date day, after specific hour Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


803
804
805
806
807
808
809
810
811
812</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 803</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_notify_authors_about_evaluation_results?'>allowed_to_notify_authors_about_evaluation_results?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:notify_authors_about_evaluation_results</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_publish_date'>evaluation_publish_date</span><span class='period'>.</span><span class='id identifier rubyid_to_date'>to_date</span> <span class='op'>!=</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_publish_date'>evaluation_publish_date</span> <span class='op'>&gt;=</span> <span class='const'>DateTime</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_step'>evaluation_step</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active_step?'>active_step?</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_remind_about_drafts?-instance_method">
  
    #<strong>allowed_to_remind_about_drafts?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: allow remind users about drafts projects Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


761
762
763
764
765
766
767</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 761</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_remind_about_drafts?'>allowed_to_remind_about_drafts?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:remind_about_drafts</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_submitting_step'>submitting_step</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active_step?'>active_step?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_remind_about_missing_evaluations?-instance_method">
  
    #<strong>allowed_to_remind_about_missing_evaluations?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: allow remind coordinators about missing evaluations Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


773
774
775
776
777
778
779</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 773</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_remind_about_missing_evaluations?'>allowed_to_remind_about_missing_evaluations?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_component'>component</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:remind_about_missing_evaluations</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_participatory_space'>participatory_space</span><span class='period'>.</span><span class='id identifier rubyid_evaluation_step'>evaluation_step</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active_step?'>active_step?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_send_implementation_message?-instance_method">
  
    #<strong>allowed_to_send_implementation_message?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if sending message to authors of given project about update in implementation is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


735
736
737
738
739
740
741</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 735</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_send_implementation_message?'>allowed_to_send_implementation_message?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:send_implementation_message</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_send_message?-instance_method">
  
    #<strong>allowed_to_send_message?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if sending message to authors of given project is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


722
723
724
725
726
727
728</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 722</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_send_message?'>allowed_to_send_message?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:send_message</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allowed_to_send_messages?-instance_method">
  
    #<strong>allowed_to_send_messages?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if sending bulk messages to projects authors is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


711
712
713
714
715
716</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 711</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allowed_to_send_messages?'>allowed_to_send_messages?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:bulk_message_send</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="appeal-instance_method">
  
    #<strong>appeal</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for fetching appeal from the context</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_appeal'>appeal</span>
  <span class='ivar'>@appeal</span> <span class='op'>||=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:appeal</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="appeal_action?-instance_method">
  
    #<strong>appeal_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if appeal managing actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 105</span>

<span class='kw'>def</span> <span class='id identifier rubyid_appeal_action?'>appeal_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:appeal</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_appeal'>appeal</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span>
      <span class='comment'># AD_ADMIN CAN ALWAYS EDIT appeal
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_is_paper?'>is_paper?</span>
      <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_reevaluation_time?'>withing_reevaluation_time?</span>
      <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_reevaluation_time?'>withing_verificators_reevaluation_time?</span>

      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='op'>&amp;.</span><span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span>
                     <span class='lparen'>(</span><span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span>
                       <span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_DRAFT-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_DRAFT (constant)">APPEAL_DRAFT</a></span></span><span class='comma'>,</span>
                                                               <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION (constant)">APPEAL_VERIFICATION</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_has_ad_role?'>has_ad_role?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="change_verificator_action?-instance_method">
  
    #<strong>change_verificator_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if changing project&#39;s evaluator is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


395
396
397
398
399
400
401
402
403
404
405
406</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 395</span>

<span class='kw'>def</span> <span class='id identifier rubyid_change_verificator_action?'>change_verificator_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_evaluate</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:change_verificator</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_any_draft?'>any_draft?</span>

  <span class='comment'># for changing a verificator
</span>  <span class='comment'># for ad_admin, scope coordinator and sub_coordinator
</span>  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="component-instance_method">
  
    #<strong>component</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for fetching component from the context</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_component'>component</span>
  <span class='ivar'>@component</span> <span class='op'>||=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:component</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="edition-instance_method">
  
    #<strong>edition</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for defining edition (participatory process) based on the component</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 87</span>

<span class='kw'>def</span> <span class='id identifier rubyid_edition'>edition</span>
  <span class='ivar'>@edition</span> <span class='op'>||=</span> <span class='id identifier rubyid_component'>component</span><span class='op'>&amp;.</span><span class='id identifier rubyid_process'>process</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="evaluation_action?-instance_method">
  
    #<strong>evaluation_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if evaluation action that was called is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>Method handles only formal and meritorical evaluation flow actions.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 210</span>

<span class='kw'>def</span> <span class='id identifier rubyid_evaluation_action?'>evaluation_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_evaluate</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:forward_to_department</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:forward_to_user</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_admin_draft</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_admin_draft?'>admin_draft?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

    <span class='comment'># if submitting paper projects is still possible
</span>    <span class='comment'># for current evaluator, scope coordinator, sub_coordinator and ad_admin
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_paper_submit_time?'>within_paper_submit_time?</span> <span class='op'>&amp;&amp;</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:return_admin_draft</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_admin_draft?'>admin_draft?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#WAITING-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::WAITING (constant)">WAITING</a></span></span>

    <span class='comment'># if submitting paper projects is still possible
</span>    <span class='comment'># for ad_admin and scope coordinator and sub_coordinator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_paper_submit_time?'>within_paper_submit_time?</span> <span class='op'>&amp;&amp;</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:publish_project</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_admin_draft?'>admin_draft?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#WAITING-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::WAITING (constant)">WAITING</a></span></span>

    <span class='comment'># for ad_admin and scope coordinator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:submit_for_formal</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#WAITING-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::WAITING (constant)">WAITING</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL (constant)">FORMAL</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_FINISHED (constant)">FORMAL_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># for ad_admin and scope coordinator and sub_coordinator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_formal</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_has_formal_evaluation?'>has_formal_evaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL (constant)">FORMAL</a></span></span>

    <span class='comment'># for ad_admin and scope coordinator and sub_coordinator till the end of evaluation time
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span>
                   <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_evaluation_time?'>withing_verificators_evaluation_time?</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:accept_formal</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_has_formal_evaluation?'>has_formal_evaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#WAITING-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::WAITING (constant)">WAITING</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL (constant)">FORMAL</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_FINISHED (constant)">FORMAL_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># for ad_admin and scope coordinator if there formal evaluation and status is waiting (no evaluator) formal (evaluator didnt finish) or formal finish
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:submit_for_meritorical</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_ACCEPTED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_ACCEPTED (constant)">FORMAL_ACCEPTED</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL (constant)">MERITORICAL</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL_FINISHED (constant)">MERITORICAL_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_negative_result?'>negative_result?</span>

    <span class='comment'># for ad_admin, scope coordinator and sub_coordinators
</span>    <span class='comment'># only if formal result is positive
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_meritorical</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_has_meritorical_evaluation?'>has_meritorical_evaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL (constant)">MERITORICAL</a></span></span>

    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span>
                   <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_evaluation_time?'>withing_verificators_evaluation_time?</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:accept_meritorical</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_has_meritorical_evaluation?'>has_meritorical_evaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_ACCEPTED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_ACCEPTED (constant)">FORMAL_ACCEPTED</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL (constant)">MERITORICAL</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL_FINISHED (constant)">MERITORICAL_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># for ad_admin and scope coordinator if there formal evaluation and status is formal_accepted (no evaluator) meritorical (evaluator didnt finis) or meritorical finish
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_project_verification</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>

    <span class='comment'># for ad_admin and scope coordinator
</span>    <span class='comment'># if formal is finished and it is negative
</span>    <span class='comment'># or if meritorical is finished
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_ACCEPTED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_ACCEPTED (constant)">FORMAL_ACCEPTED</a></span></span> <span class='op'>&amp;&amp;</span>
          <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_negative_result?'>negative_result?</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span>
        <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL_ACCEPTED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL_ACCEPTED (constant)">MERITORICAL_ACCEPTED</a></span></span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:submit_for_verification</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#WAITING-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::WAITING (constant)">WAITING</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL (constant)">FORMAL</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_FINISHED (constant)">FORMAL_FINISHED</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_ACCEPTED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_ACCEPTED (constant)">FORMAL_ACCEPTED</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL (constant)">MERITORICAL</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL_FINISHED (constant)">MERITORICAL_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># for showing choosing verificator form
</span>    <span class='comment'># for ad_admin, scope coordinator and sub_coordinator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:return_to_verificator</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_FINISHED (constant)">FORMAL_FINISHED</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL_FINISHED (constant)">MERITORICAL_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># for returning project to verificator
</span>    <span class='comment'># for ad_admin, scope coordinator and sub_coordinator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="evaluation_edition_action?-instance_method">
  
    #<strong>evaluation_edition_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if evaluation of any kind (forma, meritorical or reevaluation) edit actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed. AD_ADMIN CAN ALWAYS EDIT evaluations</p>

<p>Method is used for the views where we need action buttons for all the evaluations</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_evaluation_edition_action?'>evaluation_edition_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_evaluate</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>&amp;&amp;</span>
    <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_formal</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='rparen'>)</span> <span class='op'>||</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_meritorical</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_meritorical_evaluation'>meritorical_evaluation</span><span class='rparen'>)</span> <span class='op'>||</span>
      <span class='lparen'>(</span><span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_reevaluation</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation'>reevaluation</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='comment'># AD_ADMIN CAN ALWAYS EDIT evaluations
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_formal</span>
    <span class='comment'># koordynator moze edytowac ocene nawet po akceptacji
</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#WAITING-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::WAITING (constant)">WAITING</a></span></span>
      <span class='comment'># allowing admin, coordinator and sub_coordinator to create formal evaluation without signing it to themselves
</span>      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL (constant)">FORMAL</a></span></span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_FINISHED (constant)">FORMAL_FINISHED</a></span></span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_evaluation_time?'>withing_verificators_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='comment'># allowing coordinator to edit evaluation after it was accepted
</span>      <span class='comment'># in evaluation time
</span>      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_meritorical</span>
    <span class='comment'># koordynator moze edytowac ocene nawet po akceptacji,
</span>    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span>
    <span class='comment'># return unless project.in_evaluation?
</span>    <span class='comment'># jak nie ma jeszcze formalnej oceny lub jeżeli jest negatywna, ale jeszcze nie bylo merytorycznej (np. po edycji oceny formalnej merytoryczna moze juz byc)
</span>    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_result'>result</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_formal_evaluation'>formal_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_negative_result?'>negative_result?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_meritorical_evaluation'>meritorical_evaluation</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#FORMAL_ACCEPTED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::FORMAL_ACCEPTED (constant)">FORMAL_ACCEPTED</a></span></span>
      <span class='comment'># allowing admin, coordinator and sub_coordinator to create meritorical evaluation without signing it to themselves
</span>      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL (constant)">MERITORICAL</a></span></span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html" title="Decidim::Projects::Project::VERIFICATION_STATES (module)">VERIFICATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/VERIFICATION_STATES.html#MERITORICAL_FINISHED-constant" title="Decidim::Projects::Project::VERIFICATION_STATES::MERITORICAL_FINISHED (constant)">MERITORICAL_FINISHED</a></span></span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_evaluation_time?'>withing_verificators_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='comment'># allowing coordinator to edit evaluation after it was accepted
</span>      <span class='comment'># in evaluation time
</span>      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_reevaluation</span>
    <span class='comment'># permission for both creating and editing
</span>
    <span class='comment'># projekt musi miec jakiekolwiek odwolanie oraz nie moze byc zapisany jako draft przez uzytkownika
</span>    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>appeal_draft</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_reevaluation_time?'>withing_reevaluation_time?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span>
      <span class='comment'># koordynator ma miec mozliwosc edycji do konca procesu reewaluacji
</span>      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span>
      <span class='comment'># weryfikator ma miec mozliwosc edycji tylko do czasu oznaczonego w etapie
</span>      <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_verificators_reevaluation_time?'>withing_verificators_reevaluation_time?</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_WAITING-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_WAITING (constant)">APPEAL_WAITING</a></span></span><span class='comma'>,</span>
                                       <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION (constant)">APPEAL_VERIFICATION</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="forward_to_department_action?-instance_method">
  
    #<strong>forward_to_department_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if forwarding project to the department is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354
355
356
357
358
359</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 352</span>

<span class='kw'>def</span> <span class='id identifier rubyid_forward_to_department_action?'>forward_to_department_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_published?'>published?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_evaluate</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:forward_to_department</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="forward_to_user_action?-instance_method">
  
    #<strong>forward_to_user_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if forwarding project to the user is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


381
382
383
384
385
386
387
388
389</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 381</span>

<span class='kw'>def</span> <span class='id identifier rubyid_forward_to_user_action?'>forward_to_user_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_evaluate</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:forward_to_user</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_in_reevaluation?'>is_in_reevaluation?</span> <span class='comment'># checks only status
</span>
  <span class='comment'># for choosing a sub_coordinator
</span>  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="implementation_action?-instance_method">
  
    #<strong>implementation_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if implementation managing actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


561
562
563
564
565
566
567
568
569
570
571</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 561</span>

<span class='kw'>def</span> <span class='id identifier rubyid_implementation_action?'>implementation_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_chosen_for_implementation?'>chosen_for_implementation?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:implementation</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_implementation</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="implementation_index_action?-instance_method">
  
    #<strong>implementation_index_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if viewing implementations index is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579
580
581
582</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 577</span>

<span class='kw'>def</span> <span class='id identifier rubyid_implementation_index_action?'>implementation_index_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:implementations</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:index</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_sub_coordinator?'>ad_sub_coordinator?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_verifier?'>ad_verifier?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="permissions-instance_method">
  
    #<strong>permissions</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: main method called to check permissions in the admin scope.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_permissions'>permissions</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_permission_action'>permission_action</span> <span class='kw'>unless</span> <span class='id identifier rubyid_user'>user</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_permission_action'>permission_action</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_scope'>scope</span> <span class='op'>==</span> <span class='symbol'>:admin</span>

  <span class='id identifier rubyid_allowed_project_reading_actions?'>allowed_project_reading_actions?</span>
  <span class='id identifier rubyid_allowed_project_creating_actions?'>allowed_project_creating_actions?</span>
  <span class='id identifier rubyid_allowed_project_updating_actions?'>allowed_project_updating_actions?</span>
  <span class='id identifier rubyid_allowed_project_deleting_actions?'>allowed_project_deleting_actions?</span>
  <span class='id identifier rubyid_allowed_project_accepting_actions?'>allowed_project_accepting_actions?</span>
  <span class='id identifier rubyid_allowed_project_status_change?'>allowed_project_status_change?</span>
  <span class='id identifier rubyid_allowed_project_passing_actions?'>allowed_project_passing_actions?</span>
  <span class='id identifier rubyid_allowed_project_publishing_action?'>allowed_project_publishing_action?</span>
  <span class='id identifier rubyid_allowed_projects_bulk_action?'>allowed_projects_bulk_action?</span>
  <span class='id identifier rubyid_allowed_to_send_messages?'>allowed_to_send_messages?</span>
  <span class='id identifier rubyid_allowed_to_send_message?'>allowed_to_send_message?</span>
  <span class='id identifier rubyid_allowed_to_send_implementation_message?'>allowed_to_send_implementation_message?</span>
  <span class='id identifier rubyid_allowed_to_manage_project_form?'>allowed_to_manage_project_form?</span>
  <span class='id identifier rubyid_allowed_to_manage_poster_template?'>allowed_to_manage_poster_template?</span>
  <span class='id identifier rubyid_allowed_register_project_to_signum?'>allowed_register_project_to_signum?</span>
  <span class='id identifier rubyid_allowed_to_accept_coauthor?'>allowed_to_accept_coauthor?</span>

  <span class='id identifier rubyid_allowed_to_remind_about_drafts?'>allowed_to_remind_about_drafts?</span>
  <span class='id identifier rubyid_allowed_to_remind_about_missing_evaluations?'>allowed_to_remind_about_missing_evaluations?</span>
  <span class='id identifier rubyid_allowed_to_notify_authors_about_evaluation_result?'>allowed_to_notify_authors_about_evaluation_result?</span>
  <span class='id identifier rubyid_allowed_to_notify_authors_about_evaluation_results?'>allowed_to_notify_authors_about_evaluation_results?</span>
  <span class='id identifier rubyid_allowed_to_notify_authors_about_all_evaluation_results?'>allowed_to_notify_authors_about_all_evaluation_results?</span>

  <span class='id identifier rubyid_appeal_action?'>appeal_action?</span>
  <span class='id identifier rubyid_evaluation_action?'>evaluation_action?</span> <span class='comment'># pierwsza ocena
</span>  <span class='id identifier rubyid_evaluation_edition_action?'>evaluation_edition_action?</span> <span class='comment'># Pozwolenie na edycje ocen
</span>  <span class='id identifier rubyid_forward_to_department_action?'>forward_to_department_action?</span> <span class='comment'># przekazanie
</span>  <span class='id identifier rubyid_return_to_department_action?'>return_to_department_action?</span> <span class='comment'># zwrócenie
</span>  <span class='id identifier rubyid_forward_to_user_action?'>forward_to_user_action?</span> <span class='comment'># przekazanie
</span>  <span class='id identifier rubyid_verification_action?'>verification_action?</span>
  <span class='id identifier rubyid_reevaluation_action?'>reevaluation_action?</span> <span class='comment'># druga ocena
</span>  <span class='id identifier rubyid_second_verification_action?'>second_verification_action?</span>
  <span class='id identifier rubyid_change_verificator_action?'>change_verificator_action?</span> <span class='comment'># smiana lub usuniecie weryfikatora
</span>
  <span class='id identifier rubyid_implementation_action?'>implementation_action?</span>
  <span class='id identifier rubyid_implementation_index_action?'>implementation_index_action?</span>
  <span class='id identifier rubyid_projects_export_action?'>projects_export_action?</span>

  <span class='id identifier rubyid_allowed_to_mark_conflicts?'>allowed_to_mark_conflicts?</span>
  <span class='id identifier rubyid_allowed_to_erase_user_data?'>allowed_to_erase_user_data?</span>
  <span class='id identifier rubyid_project_conflict_action?'>project_conflict_action?</span>

  <span class='id identifier rubyid_allowed_to_generate_voting_numbers?'>allowed_to_generate_voting_numbers?</span>
  <span class='id identifier rubyid_allowed_to_export_voting_card?'>allowed_to_export_voting_card?</span>
  <span class='id identifier rubyid_votes_action?'>votes_action?</span>
  <span class='id identifier rubyid_voting_list_action?'>voting_list_action?</span>
  <span class='id identifier rubyid_ranking_list_action?'>ranking_list_action?</span>

  <span class='id identifier rubyid_permission_action'>permission_action</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="process-instance_method">
  
    #<strong>process</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for participatory process scope based on the component</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span>
  <span class='ivar'>@process</span> <span class='op'>||=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:process</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project-instance_method">
  
    #<strong>project</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for fetching project from the context</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project'>project</span>
  <span class='ivar'>@project</span> <span class='op'>||=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:project</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_conflict_action?-instance_method">
  
    #<strong>project_conflict_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if project conflict handling actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


949
950
951
952
953</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 949</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_conflict_action?'>project_conflict_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_conflict</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="projects_export_action?-instance_method">
  
    #<strong>projects_export_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if exporting projects to file is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


412
413
414
415
416
417</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 412</span>

<span class='kw'>def</span> <span class='id identifier rubyid_projects_export_action?'>projects_export_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:projects</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:export</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ranking_list_action?-instance_method">
  
    #<strong>ranking_list_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if ranking lists actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


933
934
935
936
937</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 933</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ranking_list_action?'>ranking_list_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:ranking_list</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reevaluation_action?-instance_method">
  
    #<strong>reevaluation_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if reevaluation action that was called is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>Method handles only reevaluation flow actions.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 446</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reevaluation_action?'>reevaluation_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_reevaluate</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_withing_reevaluation_time?'>withing_reevaluation_time?</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_appeal_draft</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_in_reevaluation?'>is_in_reevaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_DRAFT-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_DRAFT (constant)">APPEAL_DRAFT</a></span></span>

    <span class='comment'># when appeal was added by user and can be submitted
</span>    <span class='comment'># we allow admins submit any appeal
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_is_paper'>is_paper</span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span>
                     <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span>
                     <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_author'>author</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:accept_paper_appeal</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_is_paper'>is_paper</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_WAITING_ACCEPTANCE-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_WAITING_ACCEPTANCE (constant)">APPEAL_WAITING_ACCEPTANCE</a></span></span>

    <span class='comment'># we allow admins to to accept any appeal
</span>    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_appeal'>appeal</span><span class='period'>.</span><span class='id identifier rubyid_is_paper'>is_paper</span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:submit_for_verification</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_WAITING-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_WAITING (constant)">APPEAL_WAITING</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION (constant)">APPEAL_VERIFICATION</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION_FINISHED (constant)">APPEAL_VERIFICATION_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># for paper appeals appeal must first be accepted
</span>    <span class='comment'># for choosing verifier while project is not yet in CKS
</span>    <span class='comment'># for ad_admin, scope coordinator and subcoordinator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_appeal_verification</span>
    <span class='comment'># if user is admin or coordinator they skip this action
</span>    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation'>reevaluation</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION (constant)">APPEAL_VERIFICATION</a></span></span>

    <span class='comment'># for submitting department verification
</span>    <span class='comment'># for ad_admin, scope coordinator, sub_coordinator and verificator
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:submit_to_organization_admin</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation'>reevaluation</span>

    <span class='comment'># for approving reevaluation and sending to Admins (CKS)
</span>    <span class='comment'># if appeal_waiting (no verificator),
</span>    <span class='comment'># appeal_verification (verificator did not send to coordinator) or
</span>    <span class='comment'># appeal_verification_finished (verificator did send to coordinator)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_WAITING-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_WAITING (constant)">APPEAL_WAITING</a></span></span><span class='comma'>,</span>
                                        <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION (constant)">APPEAL_VERIFICATION</a></span></span><span class='comma'>,</span>
                                        <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION_FINISHED (constant)">APPEAL_VERIFICATION_FINISHED</a></span></span><span class='comma'>,</span>
                                        <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_COORDINATOR_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_COORDINATOR_FINISHED (constant)">APPEAL_COORDINATOR_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:accept_coordinator_reevaluation</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation'>reevaluation</span>

    <span class='comment'># for approving reevaluation by coordinator
</span>    <span class='comment'># if
</span>    <span class='comment'># appeal_verification_finished (verificator did send to coordinator)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION_FINISHED (constant)">APPEAL_VERIFICATION_FINISHED</a></span></span>

      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:return_from_admin_to_coordinators</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation'>reevaluation</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_in_reevaluation?'>is_in_reevaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_ADMIN_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_ADMIN_VERIFICATION (constant)">APPEAL_ADMIN_VERIFICATION</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_COORDINATOR_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_COORDINATOR_FINISHED (constant)">APPEAL_COORDINATOR_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># ONLY for ad_admin
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:finish_reevaluation</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_reevaluation'>reevaluation</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_in_reevaluation?'>is_in_reevaluation?</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_WAITING-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_WAITING (constant)">APPEAL_WAITING</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION (constant)">APPEAL_VERIFICATION</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_VERIFICATION_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_VERIFICATION_FINISHED (constant)">APPEAL_VERIFICATION_FINISHED</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_ADMIN_VERIFICATION-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_ADMIN_VERIFICATION (constant)">APPEAL_ADMIN_VERIFICATION</a></span></span><span class='comma'>,</span>
                                                   <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project.html" title="Decidim::Projects::Project (class)">Project</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html" title="Decidim::Projects::Project::REEVALUATION_STATES (module)">REEVALUATION_STATES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Project/REEVALUATION_STATES.html#APPEAL_COORDINATOR_FINISHED-constant" title="Decidim::Projects::Project::REEVALUATION_STATES::APPEAL_COORDINATOR_FINISHED (constant)">APPEAL_COORDINATOR_FINISHED</a></span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># ONLY for ad_admin
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="return_to_department_action?-instance_method">
  
    #<strong>return_to_department_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if returning project to the department is allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


365
366
367
368
369
370
371
372
373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 365</span>

<span class='kw'>def</span> <span class='id identifier rubyid_return_to_department_action?'>return_to_department_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_evaluate</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:return_to_department</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_published?'>published?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_departments'>departments</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>1</span>

  <span class='comment'># for admins always
</span>  <span class='comment'># for coordinators only if their department says so
</span>  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_department'>department</span><span class='period'>.</span><span class='id identifier rubyid_allow_returning_projects'>allow_returning_projects</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scope-instance_method">
  
    #<strong>scope</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for defining scope based on the project</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scope'>scope</span>
  <span class='ivar'>@scope</span> <span class='op'>||=</span> <span class='id identifier rubyid_project'>project</span><span class='op'>&amp;.</span><span class='id identifier rubyid_scope'>scope</span><span class='period'>.</span><span class='id identifier rubyid_presence'>presence</span> <span class='op'>||</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'>Scope</span><span class='period'>.</span><span class='id identifier rubyid_find_by'>find_by</span><span class='lparen'>(</span><span class='label'>department_id:</span> <span class='id identifier rubyid_project'>project</span><span class='op'>&amp;.</span><span class='id identifier rubyid_current_department_id'>current_department_id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="second_verification_action?-instance_method">
  
    #<strong>second_verification_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if reevaluation actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>Method for showing reevaluation-edit-icons on table view</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


546
547
548
549
550
551
552
553
554
555</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 546</span>

<span class='kw'>def</span> <span class='id identifier rubyid_second_verification_action?'>second_verification_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_is_in_reevaluation?'>is_in_reevaluation?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_verification</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:appeal_verification</span>

  <span class='comment'># when project in reevaluation is in reevaluation
</span>  <span class='comment'># for ad_admin, scope coordinator, sub_coordinator and evaluator
</span>  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_coordinators'>coordinators</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_scope'>scope</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>==</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verification_action?-instance_method">
  
    #<strong>verification_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if verification actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>Method for showing evaluation-edit-icons on table view</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


425
426
427
428
429
430
431
432
433
434
435
436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 425</span>

<span class='kw'>def</span> <span class='id identifier rubyid_verification_action?'>verification_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_in_evaluation?'>in_evaluation?</span> <span class='comment'># checks only status
</span>  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_within_evaluation_time?'>within_evaluation_time?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:project_verification</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:formal</span> <span class='op'>||</span>
                <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:meritorical</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:formal</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>formal</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>==</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:meritorical</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_verification_status'>verification_status</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>meritorical</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>||</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_current_sub_coordinator'>current_sub_coordinator</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>==</span> <span class='id identifier rubyid_project'>project</span><span class='period'>.</span><span class='id identifier rubyid_evaluator'>evaluator</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="vote-instance_method">
  
    #<strong>vote</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for fetching vote from the context</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_vote'>vote</span>
  <span class='ivar'>@vote</span> <span class='op'>||=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:vote</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="votes_action?-instance_method">
  
    #<strong>votes_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if votes managing actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 858</span>

<span class='kw'>def</span> <span class='id identifier rubyid_votes_action?'>votes_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:votes</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:status_change</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_voting_token'>voting_token</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit_email</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard.html" title="Decidim::Projects::VoteCard (class)">VoteCard</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html" title="Decidim::Projects::VoteCard::STATUSES (module)">STATUSES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html#LINK_SENT-constant" title="Decidim::Projects::VoteCard::STATUSES::LINK_SENT (constant)">LINK_SENT</a></span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:create</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_component'>component</span><span class='period'>.</span><span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_paper_voting_submit_end_date'>paper_voting_submit_end_date</span> <span class='op'>&lt;=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span>

    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_editor?'>ad_editor?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_in?'>in?</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='symbol'>:read</span><span class='comma'>,</span> <span class='symbol'>:edit</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span>
    <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_voting_token'>voting_token</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:edit</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard.html" title="Decidim::Projects::VoteCard (class)">VoteCard</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html" title="Decidim::Projects::VoteCard::STATUSES (module)">STATUSES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html#WAITING-constant" title="Decidim::Projects::VoteCard::STATUSES::WAITING (constant)">WAITING</a></span></span>
      <span class='comment'># for admins, coordinators from given scope &amp; editors that created vote
</span>      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span>
                     <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_assigned_scope_id'>assigned_scope_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_assigned_scope_id'>assigned_scope_id</span> <span class='op'>==</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_scope_id'>scope_id</span><span class='rparen'>)</span> <span class='op'>||</span>
                     <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_editor?'>ad_editor?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_author_id'>author_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:publish</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard.html" title="Decidim::Projects::VoteCard (class)">VoteCard</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html" title="Decidim::Projects::VoteCard::STATUSES (module)">STATUSES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html#WAITING-constant" title="Decidim::Projects::VoteCard::STATUSES::WAITING (constant)">WAITING</a></span></span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_voting_token'>voting_token</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_assigned_scope_id'>assigned_scope_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_assigned_scope_id'>assigned_scope_id</span> <span class='op'>==</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_scope_id'>scope_id</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:index</span>
    <span class='comment'># only for admins and coordinators from departments assigned to scopes
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_assigned_scope_id'>assigned_scope_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_editor?'>ad_editor?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:export</span>
    <span class='comment'># only for admins and coordinators from departments assigned to scopes
</span>    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_coordinator?'>ad_coordinator?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_assigned_scope_id'>assigned_scope_id</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:export_for_verification</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:verify</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:resend_email_vote</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard.html" title="Decidim::Projects::VoteCard (class)">VoteCard</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html" title="Decidim::Projects::VoteCard::STATUSES (module)">STATUSES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html#LINK_SENT-constant" title="Decidim::Projects::VoteCard::STATUSES::LINK_SENT (constant)">LINK_SENT</a></span></span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_is_paper'>is_paper</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_voting_token'>voting_token</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>

    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:resend_all_email_votes</span>
    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>

  <span class='kw'>elsif</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_action'>action</span> <span class='op'>==</span> <span class='symbol'>:get_link_for_vote</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="../../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Projects.html" title="Decidim::Projects (module)">Projects</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard.html" title="Decidim::Projects::VoteCard (class)">VoteCard</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html" title="Decidim::Projects::VoteCard::STATUSES (module)">STATUSES</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../VoteCard/STATUSES.html#LINK_SENT-constant" title="Decidim::Projects::VoteCard::STATUSES::LINK_SENT (constant)">LINK_SENT</a></span></span>
    <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_vote'>vote</span><span class='period'>.</span><span class='id identifier rubyid_is_paper'>is_paper</span> <span class='op'>==</span> <span class='kw'>false</span>

    <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="voting_list_action?-instance_method">
  
    #<strong>voting_list_action?</strong>  &#x21d2; <tt>Boolean</tt>  <span class="extras">(private)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Public: method for determining if voting lists actions are allowed. Based on the outcome, method sets the permission_action as allowed or disallowed.</p>

<p>returns nothing</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


923
924
925
926
927</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-projects/app/permissions/decidim/projects/admin/permissions.rb', line 923</span>

<span class='kw'>def</span> <span class='id identifier rubyid_voting_list_action?'>voting_list_action?</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_permission_action'>permission_action</span><span class='period'>.</span><span class='id identifier rubyid_subject'>subject</span> <span class='op'>==</span> <span class='symbol'>:voting_list</span>

  <span class='id identifier rubyid_toggle_allow'>toggle_allow</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_ad_admin?'>ad_admin?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Dec  5 11:38:26 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-2.7.3).
</div>

    </div>
  </body>
</html>